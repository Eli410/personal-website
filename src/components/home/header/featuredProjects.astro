---
import { proyectos } from "../../../data/projectData.js";

const featuredTitles = ["Instant Karaoke", "Aggie Class Alert", "Maroon Rides", "HPC Runner"];
const featuredPool = featuredTitles
  .map((title) => proyectos.find((p) => p.titulo === title))
  .filter(Boolean);
const shuffled = [...featuredPool].sort(() => Math.random() - 0.5);
const featuredProjects = shuffled.slice(0, 2).filter((p) => p != null);
---

<div class="animate-fadeInUp stagger-5 mt-16 w-full max-w-6xl mx-auto px-4 min-w-0">
  <h2
    class="text-4xl font-bold flex flex-col items-center gap-6 text-center whitespace-nowrap text-[#38bdf8] md:flex-row md:items-center md:text-start mb-6"
  >
    <span>Featured Projects</span>
    <span
      class="hidden h-1 grow rounded-lg bg-gradient-to-r from-[#1e293b] to-[#38bdf8]/30 md:block"
    ></span>
  </h2>
  
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {featuredProjects.map((featuredProject) => (
      <a
        href={featuredProject.url}
        target="_blank"
        rel="noopener noreferrer"
        class="random-project-card group flex flex-col overflow-hidden rounded-2xl bg-[#1e293b]/80 backdrop-blur-sm border border-[#38bdf8]/10 transition-all duration-300 hover:-translate-y-1 text-left block w-full"
      >
        <div class="relative overflow-hidden w-full">
          <img
            src={featuredProject.imagen}
            alt={`Project: ${featuredProject.titulo}`}
            class="w-full h-auto block object-contain bg-[#0f172a]/30"
            loading="lazy"
          />
        </div>
        <div class="flex flex-col grow p-5 md:p-6">
          <h3 class="text-xl md:text-2xl font-bold text-white mb-2">{featuredProject.titulo}</h3>
          <p class="text-zinc-400 text-sm md:text-base leading-relaxed mb-4">{featuredProject.descripcion}</p>
          <div class="flex flex-wrap gap-2">
            {featuredProject.tecnologias.map((tech) => (
              <span class="rounded-full bg-[#1e293b]/20 text-[#38bdf8] px-3 py-1 text-xs font-semibold">{tech}</span>
            ))}
          </div>
        </div>
      </a>
    ))}
  </div>
  
  <a
    href="/projects"
    class="group inline-flex items-center gap-2 mt-6 px-5 py-2.5 border border-[#38bdf8]/30 text-[#38bdf8] font-semibold rounded-xl transition-all duration-300 hover:bg-[#38bdf8]/10 hover:border-[#38bdf8]/50"
  >
    View All Projects
    <svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
    </svg>
  </a>
</div>
