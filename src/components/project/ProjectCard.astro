---
export interface Props {
  titulo: string;
  descripcion: string;
  imagen: string;
  tecnologias: string[];
  url?: string;
  github?: string;
  categoria?: string;
  index: number;
  role?: string;
  dateRange?: string;
  subtitle?: string;
}

const { titulo, descripcion, imagen, tecnologias, url, github, categoria, index, dateRange } =
  Astro.props;
const githubUrl = github ?? (url?.includes("github.com") ? url : null);
const externalUrl = url && url !== githubUrl ? url : null;
---

<article
  data-index={index}
  data-categoria={categoria ?? ""}
  class="project-card"
>
  <div class="project-card__inner">
    <div class="project-card__media">
      <img
        src={imagen}
        alt={`Project: ${titulo}`}
        class="project-card__image"
        loading="lazy"
      />
    </div>
    <div class="project-card__body">
      <h2 class="project-card__title">{titulo}</h2>
      {dateRange && (
        <p class="project-card__date">{dateRange}</p>
      )}
      <div class="project-card__tech">
        {
          tecnologias.map((tech) => (
            <span class="project-card__tech-tag">{tech}</span>
          ))
        }
      </div>
      <p class="project-card__description">{descripcion}</p>
      <div class="project-card__actions">
        {githubUrl && (
          <a
            href={githubUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="project-card__btn project-card__btn--github"
          >
            <img src="/icons/github.svg" alt="" class="project-card__btn-icon" width="18" height="18" />
            GitHub
          </a>
        )}
        {externalUrl && (
          <a
            href={externalUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="project-card__btn project-card__btn--outline"
          >
            View project
          </a>
        )}
      </div>
    </div>
  </div>
</article>
